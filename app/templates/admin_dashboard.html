{% extends "base.html" %}

{% block title %}管理者ダッシュボード{% endblock %}

{% block content %}
<h2 class="mb-4">管理者ダッシュボード</h2>

<div class="row mb-4">
    <div class="col-12">
        <div class="card p-3 shadow-sm bg-light">
            <h4 class="card-title text-primary">講師・生徒の管理</h4>
            <p class="mb-2">講師のシフトや生徒情報の追加・削除は管理画面から行えます。</p>
            <a href="{{ url_for('main.manage_users') }}" class="btn btn-warning w-100">講師・生徒管理画面へ</a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card p-4 shadow-sm mb-4">
            <h4 class="card-title text-success">全講師のシフト一覧</h4>
            <p class="text-muted">直近のシフト状況を確認できます。</p>
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>日付</th>
                        <th>講師名</th>
                        <th>時間帯</th>
                    </tr>
                </thead>
                <tbody>
                    {% for shift in all_shifts %}
                    <tr>
                        <td>{{ shift.date }}</td>
                        <td>{{ shift.teacher_name }}</td>
                        <td>{{ shift.start_time[:5] }} 〜 {{ shift.end_time[:5] }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="3" class="text-center text-muted">現在登録されているシフトはありません。</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card p-4 shadow-sm mb-4">
            <h4 class="card-title text-danger">欠席・振替の最新履歴</h4>
            <p class="text-muted">直近の授業変更を確認できます。</p>
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>日付</th>
                        <th>生徒名</th>
                        <th>状態</th>
                        <th>講師名</th>
                    </tr>
                </thead>
                <tbody>
                    {% for change in recent_changes %}
                    <tr>
                        <td>{{ change.date }}</td>
                        <td>{{ change.student_name }}</td>
                        <td>
                            {% if change.status == '欠席' %}
                                <span class="badge bg-danger">{{ change.status }}</span>
                            {% elif change.status == '振替' %}
                                <span class="badge bg-warning text-dark">{{ change.status }}</span>
                            {% else %}
                                {{ change.status }}
                            {% endif %}
                        </td>
                        <td>{{ change.teacher_name }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4" class="text-center text-muted">欠席・振替の記録はまだありません。</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
