{% extends "base.html" %}

{% block title %}ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}

{% block content %}
<h2 class="mb-4">ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>

<div class="row mb-4">
    <!-- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã¸ã®å°ç·š -->
    <div class="col-12">
        <div class="card p-3 shadow-sm bg-light">
            <h4 class="card-title text-primary">âš™ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ç”Ÿå¾’æƒ…å ±ç®¡ç†</h4>
            <p>è¬›å¸«ã‚„ç”Ÿå¾’ã®è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤ã¯ã“ã¡ã‚‰ã‹ã‚‰è¡Œãˆã¾ã™ã€‚</p>
            <a href="{{ url_for('manage_users') }}" class="btn btn-warning w-100">è¬›å¸«ãƒ»ç”Ÿå¾’ç®¡ç†ç”»é¢ã¸</a>
        </div>
    </div>
</div>

<div class="row">
    <!-- å…¨è¬›å¸«ã‚·ãƒ•ãƒˆä¸€è¦§ (å·¦å´: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼ã®ä»£æ›¿) -->
    <div class="col-md-6">
        <div class="card p-4 shadow-sm mb-4">
            <h4 class="card-title text-success">ğŸ—“ï¸ å…¨è¬›å¸«ã‚·ãƒ•ãƒˆä¸€è¦§ (ç›´è¿‘ã®ã‚·ãƒ•ãƒˆ)</h4>
            <p class="text-muted">å…¨è¬›å¸«ã®ç›´è¿‘ã®å‡ºå‹¤äºˆå®šã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
            
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>æ—¥ä»˜</th>
                        <th>è¬›å¸«å</th>
                        <th>æ™‚é–“å¸¯</th>
                    </tr>
                </thead>
                <tbody>
                    {% for shift in all_shifts %}
                    <tr>
                        <td>{{ shift.date }}</td>
                        <td>{{ shift.teacher_name }}</td>
                        <td>{{ shift.start_time[:5] }} ã€œ {{ shift.end_time[:5] }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="3" class="text-center text-muted">ç¾åœ¨ã€ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚·ãƒ•ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- æ¬ å¸­ãƒ»æŒ¯æ›¿å±¥æ­´ (å³å´) -->
    <div class="col-md-6">
        <div class="card p-4 shadow-sm mb-4">
            <h4 class="card-title text-danger">âš ï¸ æ¬ å¸­ãƒ»æŒ¯æ›¿ æœ€æ–°å±¥æ­´</h4>
            <p class="text-muted">ç›´è¿‘ã®æˆæ¥­å¤‰æ›´æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
            
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>æ—¥ä»˜</th>
                        <th>ç”Ÿå¾’å</th>
                        <th>çŠ¶æ…‹</th>
                        <th>æ‹…å½“è¬›å¸«</th>
                    </tr>
                </thead>
                <tbody>
                    {% for change in recent_changes %}
                    <tr>
                        <td>{{ change.date }}</td>
                        <td>{{ change.student_name }}</td>
                        <td>
                            {% if change.status == 'æ¬ å¸­' %}
                                <span class="badge bg-danger">{{ change.status }}</span>
                            {% elif change.status == 'æŒ¯æ›¿' %}
                                <span class="badge bg-warning text-dark">{{ change.status }}</span>
                            {% else %}
                                {{ change.status }}
                            {% endif %}
                        </td>
                        <td>{{ change.teacher_name }}</td>
                    </tr>
                    {% else %}
                    <tr><td colspan="4" class="text-center text-muted">æ¬ å¸­ãƒ»æŒ¯æ›¿ã®å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
